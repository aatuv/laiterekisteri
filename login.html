<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
		<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <meta charset="utf-8" />
    <title>Sisäänkirjautuminen</title>
</head>
<body>
	<script>
		$(document).ready(function(){
			$("#dialog").dialog({
				autoOpen: false,
            	closeOnEscape: false,
            	draggable: false,
				modal: true,
				title: "Rekisteröityminen",
				resizable: false,
				
				open: function( event, ui ) {
					$(".ui-dialog-titlebar-close", ui.dialog | ui).hide();
			}
			});
			$("#rek").click(function() {
				$('#dialog').html(
					'<p>Nimi</p>'+
					'<input type="text" id="nimi" name="nimi">'+
					'<p>Osoite</p>'+
					'<input type="text" id="osoite" name="osoite">'+
					'<p>Tunnus</p>'+
					'<input type="text" id="tunnus" name="tunnus">'+
					'<p>Salasana</p>'+
					'<input type="text" id="salasana" name="salasana">'+
					'<p>Puhelinnro</p>'+
					'<input type="text" id="puh" name="puh">'+
					'<button id="peruuta">peruuta</button>'+
					'<button id="save">Rekisteröidy</button>'
			
				);
                $("#dialog").dialog("open");
			});
			$("#dialog").on('click', '#peruuta', function(){
				$(this).closest("#dialog").dialog('close');
				
			});
			$("#dialog").on('click', '#save', function(){
				console.log("asd");
				var nimi = $("#nimi").val();
				console.log(nimi);
				var osoite = $("#osoite").val();
				console.log(osoite);
				var tunnus = $("#tunnus").val();
				console.log(tunnus);
				var salasana = $("#salasana").val();
				console.log(salasana);
				var puh = $("#puh").val();
				console.log(puh);
				$.ajax({
            		type: "POST",
            		url: "localhost:3001/Asiakas",
            		timeout: 2000,
            		data: { nimi: nimi, osoite: osoite, tunnus: tunnus, salasana: salasana, puh: puh },
            		success: function(data) {
                		//show content
                		alert('Success!')
            		},
            		error: function(jqXHR, textStatus, err) {
                		//show error message
                		alert('text status '+textStatus+', err '+err)
            		}
        
    			});
				$(this).closest("#dialog").dialog('close');
			});
		});
		function lisaaAsiakas(lisayslauseke) {
            $.post(
                "http://localhost:3001/asiakas",
                lisayslauseke
            ).done(function (data, textStatus, jqXHR) {
                console.log("status=" + textStatus);
            }).fail(function (jqXHR, textStatus, errorThrown) {
                console.log("status=" + textStatus + ", " + errorThrown);
            });
        }
	</script>
    
    <p>{{message}}</p>
	<h1>Laiterekisteri</h1>
	<p>Kirjaudu</p>
	<form id="loginForm" action="/login" method="post">
		<label for="tunnus">Tunnus</label>
		<input type="text" name="tunnus" />
		<br/> 
		<label for="ss">Tunnus</label>
		<input type="text" name="ss" />
		<br/>
		<a href="#" id="rek">Rekisteröidy</a>
		<br/> 		
        <input type="submit" name="send" value="Kirjaudu" />
	</form>
	<div id=dialog></div>
</body>
</html>








